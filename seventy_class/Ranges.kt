// Простое задание: "Генератор чеков"
// Цель: Создать программу, которая генерирует фискальный чек (как в магазине) с использованием диапазонов.

// Что программа должна делать (объяснение словами):
// Часть 1: Шапка чека (диапазон символов)
// Создать красивую шапку чека из символов (например, ==============)
// Использовать диапазон символов или повторение символа заданное количество раз
// Вывести название магазина, дату и время

// Часть 2: Список товаров (цикл по диапазону)
// Предложить пользователю ввести количество товаров в чеке (от 1 до 10)
// Использовать диапазон от 1 до введенного числа
// Для каждого товара запросить: название, цену, количество
// Рассчитать стоимость для каждого товара (цена × количество)

// Часть 3: Итоговая сумма (диапазон с until)
// Рассчитать общую сумму чека
// Рассчитать скидку (например, 5% если сумма больше 1000)
// Использовать диапазон для определения размера скидки (например: если сумма в диапазоне 1000..1999 — скидка 5%, 2000..2999 — 10% и т.д.)

// Часть 4: НДС расчет (диапазон с шагом)
// Рассчитать НДС для разных категорий товаров
// Использовать разные ставки НДС (10%, 20%)
// Показать разбивку по ставкам НДС

// Часть 5: Подвал чека (оператор in для проверки)
// Добавить номер чека (случайное число в диапазоне)
// Проверить, попадает ли номер чека в "счастливый" диапазон (например, 1000..1999)
// Если попадает — добавить поздравление



fun main(){
    var headTitle = """
================================

        Магазин Max@mum

================================
    Дата: 04.12.2025 16:34
--------------------------------

                                """;
    print("Введите количество товаров в чеке:(от 1 до 10) ");
    var сountSupplies:UByte = readLine()?.toUByteOrNull()?:1u;
    var nameSupplie:String = " ";
    var productPrice: Float;
    var countSuppllie:UByte;
    var summSupplie:Float;
    var supplieString:String = "";
    var sumPtoductPrice:Float = 0f;
    var numberCheck:UByte = (1..100).random().toUByte();
    for (i in 1.toUByte()..сountSupplies){
        print("Введите название товара: ");
        nameSupplie = readLine()?:" ";
        print("Введите цену товара: ");
        productPrice = readLine()?.toFloatOrNull() ?: 0.0f;
        print("Введите количество товара: ");
        countSuppllie = readLine()?.toUByteOrNull()?:1u;
        summSupplie = productPrice * countSuppllie.toFloat();
        sumPtoductPrice += summSupplie;
        supplieString += "$i. $nameSupplie          $productPrice * $countSuppllie = $summSupplie ₽ \n";

    }
    println(headTitle);
    print(supplieString);
    println("--------------------------------");
    println("Итого:          $sumPtoductPrice ₽ ");
    var discount: UByte = when (sumPtoductPrice.toInt()){
        in 1000.toInt() until 2000.toInt() -> (5).toUByte();
        in 2000.toInt() until 3000.toInt() -> (10).toUByte();
        in 3000.toInt() until 4000.toInt() -> (15).toUByte();
        else -> 1.toUByte();
    };
    println("Скидка:          $discount %");
    println("К оплате:          ${(sumPtoductPrice.toInt()).minus(sumPtoductPrice.toInt()*discount.toInt()/100)} ₽");
    println("НДС:          10%");
    if (numberCheck == 100.toUByte()){
        println("""
----------------------
Чек №: $numberCheck
Спасибо за покупку!
Поздравляю у вас 100 номер чека!
=======================
    """);

    }else{
        println("""
----------------------
Чек №: $numberCheck
Спасибо за покупку!
=======================
    """);
    }



}